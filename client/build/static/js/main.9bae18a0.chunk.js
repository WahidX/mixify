(this["webpackJsonpspotify-mixer"]=this["webpackJsonpspotify-mixer"]||[]).push([[0],{114:function(e,t,n){},115:function(e,t,n){},143:function(e,t,n){},144:function(e,t,n){},145:function(e,t,n){},146:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(11),r=n.n(i),o=(n(114),n(35)),l=n(13),s=n(98),j=n(199),d=n(198),u=n(66),b=n(8),O=n(17),f=n(186),h=n(200),p=n(102),x=n(149),m=(n(115),n(2)),g=Object(a.createContext)(),y=function(e){var t=Object(a.useState)({token:"",loading:!1,linkid:"",error:null,joined:!1,playlists:[],selected:[],userID:null,created:!1,readyToCreate:!1}),n=Object(O.a)(t,2),c=n[0],i=n[1];return Object(m.jsx)(g.Provider,{value:[c,i],children:e.children})},v="https://mixify-x.herokuapp.com/api/v1",k={loginSpotify:function(e){return"".concat(v,"/login/").concat(e)},redirectUrl:function(){return"".concat(v,"/auth/redirect")},createLink:function(){return"".concat(v,"/create")},joinLink:function(e){return"".concat(v,"/join/").concat(e)},fetchPlaylists:function(){return"https://api.spotify.com/v1/me/playlists"},submitPlaylist:function(){return"".concat(v,"/playlist/submit")},refreshRoom:function(e){return"".concat(v,"/mix/refresh/").concat(e)},roomUrl:function(e){return"".concat("https://mixify-xd.web.app","/room/").concat(e)},createMix:function(){return"".concat(v,"/mix/create")}},C=function(e){if(e)return e;var t=function(){var e={};return window.location.hash.replace("#","").split("&").map((function(t){var n=t.split("=");e[n[0]]=n[1]})),e}();return[t.access_token,t.state]},w=n.p+"static/media/spotifyLogo.4bf5bfa8.png",N=n(32),I=n.n(N),P=n(41),S=n.n(P),E=function(e,t,n){var a={method:"post",url:k.joinLink(t),headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify({access_token:e})};n((function(e){return Object(b.a)(Object(b.a)({},e),{},{loading:!0})})),I()(a).then((function(e){"Room ended"===e.data.message&&n((function(n){return Object(b.a)(Object(b.a)({},n),{},{linkid:t,playlistUrl:e.data.playlist_link})})),n((function(n){return Object(b.a)(Object(b.a)({},n),{},{linkid:t,loading:!1,joined:!0,userID:e.data.userID,creator:e.data.creator})}))})).catch((function(e){console.log("Err: ",e),n((function(t){return Object(b.a)(Object(b.a)({},t),{},{loading:!1,error:e})}))}))},U=n(180),D=n(204),R=n(184),T=n(185),_=n(187),M=n(93),F=n.n(M),L=n(94),z=n.n(L),B=c.a.forwardRef((function(e,t){return Object(m.jsx)(U.a,Object(b.a)({direction:"up",ref:t},e))}));var J=function(e){var t=e.playlistUrl;return Object(m.jsxs)(D.a,{open:t,TransitionComponent:B,keepMounted:!0,children:[Object(m.jsx)(R.a,{children:"Playlist created !"}),Object(m.jsx)(T.a,{align:"center",children:Object(m.jsx)(f.a,{variant:"contained",color:"secondary",endIcon:Object(m.jsx)(F.a,{}),onClick:function(){window.open(t,"_blank")},children:"Check out Playlist"})}),Object(m.jsxs)(_.a,{children:[Object(m.jsx)(f.a,{variant:"contained",color:"primary",onClick:function(){window.location.reload()},children:"Start new Room"}),Object(m.jsx)(f.a,{variant:"contained",color:"primary",endIcon:Object(m.jsx)(z.a,{}),onClick:function(){window.open("upi://pay?pa=7602306212@axl&pn=X&mc=0000&mode=02&purpose=00","_blank")},children:"Buy me a Coffee!"})]})]})};var W=function(e){var t=Object(a.useContext)(g),n=Object(O.a)(t,2),i=n[0],r=n[1],o=Object(a.useState)(""),s=Object(O.a)(o,2),j=s[0],d=s[1],u=i.token,y=i.loading;return i.playlistUrl,Object(a.useEffect)((function(){if(window.location.hash&&!u){var e=C(u),t=Object(O.a)(e,2),n=t[0],a=t[1];r((function(e){return Object(b.a)(Object(b.a)({},e),{},{token:n,linkid:a})}))}}),[]),Object(a.useEffect)((function(){i.linkid&&"0"!==i.linkid&&E(i.token,i.linkid,r)}),[i.linkid]),i.joined?Object(m.jsx)(l.a,{to:"/playlist"}):Object(m.jsxs)("div",{id:"home-container",children:[y&&"loading",u?Object(m.jsxs)("div",{id:"create-join-cont",children:[Object(m.jsx)(f.a,{className:"black-btn",variant:"contained",size:"large",color:"primary",disabled:y,onClick:function(){return function(e,t){var n={method:"post",url:k.createLink(),headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify({access_token:e})};t((function(e){return Object(b.a)(Object(b.a)({},e),{},{loading:!0})})),I()(n).then((function(e){t((function(t){return Object(b.a)(Object(b.a)({},t),{},{linkid:e.data.linkid,loading:!1,created:!0,joined:!0,userID:e.data.userID})}))})).catch((function(e){console.log("Err: ",e),t((function(t){return Object(b.a)(Object(b.a)({},t),{},{loading:!1,error:e})}))}))}(u,r)},children:"Create Party"}),Object(m.jsx)("div",{className:"gap"}),Object(m.jsx)("div",{className:"gap",children:"Or"}),Object(m.jsx)(f.a,{className:"black-btn",variant:"contained",size:"large",color:"primary",disabled:y,onClick:function(){return E(u,j,r)},children:"Join Party"}),Object(m.jsx)(h.a,{variant:"filled",color:"primary",label:"Paste your link",disabled:y,value:j,onChange:function(e){return d(e.target.value)}})]}):Object(m.jsxs)(c.a.Fragment,{children:[Object(m.jsx)(p.a,{variant:"h2",align:"center",children:"Connect With Spotify"}),Object(m.jsx)("div",{className:"gap"}),Object(m.jsx)(x.a,{className:"connect-btn-container",disabled:y,children:Object(m.jsx)("a",{href:k.loginSpotify(0),children:Object(m.jsx)("img",{src:w,className:"connect-btn",alt:"connect-spotify"})})})]})]})},X=n(99),q=n(188),A=n(189),G=n(190),H=n(203);n(143);var K=function(e){var t=e.playlist,n="";return t.images.length>0&&(n=t.images[0].url),Object(m.jsxs)(c.a.Fragment,{children:[Object(m.jsxs)("div",{class:"playlist-item-container",children:[Object(m.jsx)("img",{src:n,alt:t.name}),Object(m.jsxs)("div",{className:"items-mid",children:[Object(m.jsx)(p.a,{children:t.name}),Object(m.jsx)(p.a,{variant:"caption",children:t.owner.display_name})]})]}),Object(m.jsx)("div",{className:"item-right",children:Object(m.jsxs)(p.a,{variant:"caption",children:["No of songs: ",t.tracks.total]})})]})},Q=function(e,t){var n={method:"get",url:k.fetchPlaylists(),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}};t((function(e){return Object(b.a)(Object(b.a)({},e),{},{loading:!0})})),I()(n).then((function(e){t((function(t){return Object(b.a)(Object(b.a)({},t),{},{loading:!1,playlists:e.data.items})}))})).catch((function(e){console.log("Err: ",e),t((function(t){return Object(b.a)(Object(b.a)({},t),{},{loading:!1,error:e})}))}))},V=n(71),Y=n.n(V);var Z=function(e){var t=e.linkid;return Object(m.jsxs)("div",{className:"copy-div",children:[Object(m.jsx)(f.a,{size:"large",color:"primary",variant:"contained",onClick:function(){return navigator.clipboard.writeText(k.roomUrl(t))},endIcon:Object(m.jsx)(Y.a,{}),children:"Room URL"}),Object(m.jsx)(f.a,{size:"large",color:"primary",variant:"contained",onClick:function(){return navigator.clipboard.writeText(t)},endIcon:Object(m.jsx)(Y.a,{}),children:"Room CODE"})]})};var $=function(e){var t=Object(a.useContext)(g),n=Object(O.a)(t,2),c=n[0],i=n[1],r=c.linkid,s=c.playlists,j=c.loading,d=c.playlistUrl;Object(a.useEffect)((function(){Q(c.token,i)}),[]);var u=Object(a.useState)([]),h=Object(O.a)(u,2),p=h[0],x=h[1];return c.joined?Object(m.jsxs)("div",{id:"playlist-page",children:[Object(m.jsx)(Z,{linkid:r}),d&&Object(m.jsx)(J,{playlistUrl:d}),Object(m.jsxs)("div",{id:"util-btns",children:[Object(m.jsx)(f.a,{id:"refresh-btn",color:"primary",variant:"contained",disabled:j,onClick:function(){return Q(c.token,i)},children:j?"loading...":"Refresh List"}),!j&&p.length>0&&Object(m.jsx)(o.b,{to:"/create",children:Object(m.jsx)(f.a,{id:"create-mix-btn",variant:"contained",color:"secondary",disabled:j||!(p.length>0),onClick:function(){p.length>0&&i((function(e){return Object(b.a)(Object(b.a)({},e),{},{selected:p})}))},children:j?"loading...":"Create MiX"})}),Object(m.jsx)(f.a,{id:"clear-btn",color:"primary",variant:"contained",disabled:j||0===p.length,onClick:function(){return x([])},children:j?"loading...":"Clear All"})]}),Object(m.jsx)(q.a,{children:s.map((function(e){return Object(m.jsxs)(A.a,{dense:!0,button:!0,onClick:function(){return function(e){var t=p.indexOf(e),n=Object(X.a)(p);-1===t?n.push(e):n.splice(t,1),x(n)}(e.id)},children:[Object(m.jsx)(G.a,{children:Object(m.jsx)(H.a,{edge:"start",color:"primary",checked:-1!==p.indexOf(e.id),tabIndex:-1,disableRipple:!0})}),Object(m.jsx)(K,{playlist:e})]},e.id)}))})]}):Object(m.jsx)(l.a,{to:"/"})},ee=n(205),te=n(192),ne=n(202),ae=n(193),ce=n(194),ie=n(195),re=n(206),oe=(n(144),function(e,t){var n={method:"get",url:k.refreshRoom(e)};t((function(e){return Object(b.a)(Object(b.a)({},e),{},{loading:!0})})),I()(n).then((function(e){t((function(t){return Object(b.a)(Object(b.a)({},t),{},{loading:!1,members:e.data.users,playlistUrl:e.data.playlistUrl})}))})).catch((function(e){return console.log("Err: ",e),t((function(t){return Object(b.a)(Object(b.a)({},t),{},{loading:!1,error:e})})),[]}))}),le=n(95),se=n.n(le),je=n(96),de=n.n(je),ue=n(97),be=n.n(ue),Oe=n(191),fe=Object(Oe.a)({textField:{"& .MuiOutlinedInput-input":{color:"white"}},radioGroup:{flexDirection:"row",justifyContent:"space-evenly"}});var he=function(e){var t=fe(),n=Object(a.useContext)(g),i=Object(O.a)(n,2),r=i[0],o=i[1],s=Object(a.useState)(""),j=Object(O.a)(s,2),d=j[0],u=j[1],x=Object(a.useState)(""),y=Object(O.a)(x,2),v=y[0],C=y[1],w=Object(a.useState)(!1),N=Object(O.a)(w,2),P=N[0],E=(N[1],r.linkid),U=r.selected,D=r.loading,R=r.readyToCreate,T=r.creator&&r.creator.spotify_id===r.userID,_=r.playlistUrl,M=r.members||[];return Object(a.useEffect)((function(){!function(e,t,n,a){var c="";e.map((function(e){c+=e+"|"})),c=c.slice(0,c.length-1),a((function(e){return Object(b.a)(Object(b.a)({},e),{},{loading:!0,readyToCreate:!1})}));var i={method:"post",url:k.submitPlaylist(),headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify({access_token:t,playlists:c,userID:n})};I()(i).then((function(e){a((function(e){return Object(b.a)(Object(b.a)({},e),{},{loading:!1,readyToCreate:!0})}))})).catch((function(e){console.log("Err: ",e),a((function(e){return Object(b.a)(Object(b.a)({},e),{},{loading:!1})}))}))}(r.selected,r.token,r.userID,o),oe(E,o)}),[]),E?Object(m.jsxs)("div",{id:"page-container",children:[Object(m.jsx)(Z,{linkid:E}),_&&Object(m.jsx)(J,{playlistUrl:_}),Object(m.jsx)("div",{className:"submit-box",children:Object(m.jsxs)(p.a,{variant:"body1",align:"center",children:[U.length," playlist selected"]})}),T?Object(m.jsxs)(c.a.Fragment,{children:[Object(m.jsx)(h.a,{error:!0,className:t.textField,variant:"outlined",label:"Playlist Name",value:v,onChange:function(e){return C(e.target.value)}}),"Sorting Pattern :",Object(m.jsxs)(ee.a,{className:t.radioGroup,name:"pattern",value:d,onChange:function(e){return u(e.target.value)},children:[Object(m.jsx)(te.a,{value:"popular",control:Object(m.jsx)(ne.a,{}),label:"Popular"}),Object(m.jsx)(te.a,{value:"smart",control:Object(m.jsx)(ne.a,{}),label:"Smart"}),Object(m.jsx)(te.a,{value:"equal",control:Object(m.jsx)(ne.a,{}),label:"Equal"})]}),Object(m.jsx)(f.a,{variant:"contained",color:"primary",disabled:""===v.trim()||""===d||!R,onClick:function(){return R&&function(e,t,n,a,c,i,r){r((function(e){return Object(b.a)(Object(b.a)({},e),{},{loading:!0})}));var o={method:"post",url:k.createMix(),headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S.a.stringify({access_token:c,userID:i,linkid:e,playlistName:t,pattern:n,excludeExplicit:a})};I()(o).then((function(e){r((function(t){return Object(b.a)(Object(b.a)({},t),{},{loading:!1,playlistUrl:e.data.playlistlink})}))})).catch((function(e){console.log("Err: ",e),r((function(e){return Object(b.a)(Object(b.a)({},e),{},{loading:!1})}))}))}(E,v.trim(),d,P,r.token,r.userID,o)},children:R?"Create Playlist":Object(m.jsxs)(ae.a,{color:"primary",children:[" Wait while submitting Playlist"," "]})})]}):Object(m.jsx)(p.a,{variant:"body1",align:"center",children:"Wait for the leader and refresh"}),Object(m.jsxs)("div",{className:"room-container",children:[Object(m.jsxs)("div",{className:"header",children:[Object(m.jsxs)("div",{className:"total",children:[Object(m.jsx)(p.a,{variant:"h4",children:"Members \xa0"}),Object(m.jsx)(ce.a,{badgeContent:M.length,color:"primary",children:Object(m.jsx)(se.a,{})})]}),Object(m.jsxs)(f.a,{variant:"contained",disabled:D,onClick:function(){return oe(E,o)},children:[Object(m.jsx)(de.a,{color:"primary"})," ","Refresh"]})]}),Object(m.jsxs)(q.a,{children:[Object(m.jsx)(ie.a,{}),M.map((function(e){return Object(m.jsxs)(c.a.Fragment,{children:[Object(m.jsxs)(A.a,{children:[Object(m.jsx)(re.a,{alt:e.name,src:e.img}),"\xa0 ",e.name," \xa0",e.tracks.length>0?Object(m.jsx)(be.a,{color:"primary"}):Object(m.jsx)(ae.a,{})]},e._id),Object(m.jsx)(ie.a,{})]})}))]})]})]}):Object(m.jsx)(l.a,{to:"/"})};var pe=function(e){return Object(m.jsx)("div",{style:{padding:"30% 50px"},children:Object(m.jsx)(p.a,{variant:"h1",align:"center",children:"Page Not Found"})})},xe=n(196),me=n(197);n(145);function ge(e){var t=Object(a.useContext)(g),n=Object(O.a)(t,2),c=n[0],i=(n[1],c.creator);return Object(m.jsx)("div",{children:Object(m.jsx)(xe.a,{position:"static",children:Object(m.jsxs)(me.a,{id:"header-container",children:[Object(m.jsx)(o.b,{to:"/",children:Object(m.jsxs)(p.a,{variant:"h5",children:["MiXify ",Object(m.jsx)("small",{children:"- Mix Spotify Playlists"})]})}),i&&Object(m.jsxs)(f.a,{color:"inherit",children:[Object(m.jsx)(re.a,{src:i.img}),"\xa0 ",i.name+"'s ROOM"]})]})})})}var ye=function(e){var t=window.location.pathname.split("/")[2];return window.location.assign(k.loginSpotify(t)),null},ve=Object(s.a)({palette:{primary:{main:d.a[500]},secondary:{main:u.a[600]},error:{main:d.a[500]}}});var ke=function(e){return Object(m.jsx)(y,{children:Object(m.jsx)(o.a,{children:Object(m.jsxs)(j.a,{theme:ve,children:[Object(m.jsx)(ge,{}),Object(m.jsxs)(l.d,{children:[Object(m.jsx)(l.b,{exact:!0,path:"/",component:W}),Object(m.jsx)(l.b,{exact:!0,path:"/playlist",component:$}),Object(m.jsx)(l.b,{exact:!0,path:"/create",component:he}),Object(m.jsx)(l.b,{path:"/room",component:ye}),Object(m.jsx)(l.b,{component:pe})]})]})})})};r.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(ke,{})}),document.getElementById("root"))}},[[146,1,2]]]);
//# sourceMappingURL=main.9bae18a0.chunk.js.map